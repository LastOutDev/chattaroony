{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\19254\\\\Documents\\\\GitHub\\\\7 React Projects\\\\chat_app\\\\socket-client\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport './index.css';\nimport useSocket from 'use-socket.io-client';\nimport { useImmer } from 'use-immer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Messages = props => props.data.map(m => m[0] !== '' ? /*#__PURE__*/_jsxDEV(\"li\", {\n  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n    children: m[0]\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 7,\n    columnNumber: 66\n  }, this), \" : \", /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"innermsg\",\n    children: m[1]\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 7,\n    columnNumber: 92\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 7,\n  columnNumber: 62\n}, this) : /*#__PURE__*/_jsxDEV(\"li\", {\n  className: \"update\",\n  children: m[1]\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 7,\n  columnNumber: 140\n}, this));\n\n_c = Messages;\n\nconst Online = props => props.data.map(m => /*#__PURE__*/_jsxDEV(\"li\", {\n  id: m[0],\n  children: m[1]\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 9,\n  columnNumber: 45\n}, this));\n\n_c2 = Online;\nexport default _s(() => {\n  _s();\n\n  const [id, setId] = useState('');\n  const [nameInput, setNameInput] = useState('');\n  const [room, setRoom] = useState('');\n  const [input, setInput] = useState('');\n  const [socket] = useSocket('<https://open-chat-naostsaecf.now.sh>');\n  socket.connect();\n  const [messages, setMessages] = useImmer([]);\n  const [online, setOnline] = useImmer([]);\n  useEffect(() => {\n    socket.on('message que', (nick, message) => {\n      setMessages(draft => {\n        draft.push([nick, message]);\n      });\n    });\n    socket.on('update', message => setMessages(draft => {\n      draft.push(['', message]);\n    }));\n    socket.on('people-list', people => {\n      let newState = [];\n\n      for (let person in people) {\n        newState.push([people[person].id, people[person].nick]);\n      }\n\n      setOnline(draft => {\n        draft.push(...newState);\n      });\n      console.log(online);\n    });\n    socket.on('add-person', (nick, id) => {\n      setOnline(draft => {\n        draft.push([id, nick]);\n      });\n    });\n    socket.on('remove-person', id => {\n      setOnline(draft => {\n        draft.filter(m => m[0] !== id);\n      });\n    });\n    socket.on('chat message', (nick, message) => {\n      setMessages(draft => {\n        draft.push([nick, message]);\n      });\n    });\n  }, 0);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (!nameInput) {\n      return alert(\"Name can't be empty\");\n    }\n\n    setId(nameInput);\n    socket.emit('join', nameInput, room);\n  };\n\n  const handleSend = e => {\n    e.preventDefault();\n\n    if (input !== '') {\n      socket.emit('chat message', input, room);\n      setInput('');\n    }\n  };\n\n  return id ? /*#__PURE__*/_jsxDEV(\"section\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"row\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n      id: \"messages\",\n      children: /*#__PURE__*/_jsxDEV(Messages, {\n        data: messages\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      id: \"online\",\n      children: [\"\", \"\\uD83C\\uDF10 : \", /*#__PURE__*/_jsxDEV(Online, {\n        data: online\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"sendform\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: e => handleSend(e),\n        style: {\n          display: 'flex'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"m\",\n          onChange: e => setInput(e.target.value.trim())\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            width: \"75px\"\n          },\n          type: \"submit\",\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: \"center\",\n      margin: \"30vh auto\",\n      width: \"70%\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: event => handleSubmit(event),\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"name\",\n        onChange: e => setNameInput(e.target.value.trim()),\n        required: true,\n        placeholder: \"What is your name ..\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"room\",\n        onChange: e => setRoom(e.target.value.trim()),\n        placeholder: \"What is your room ..\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n}, \"5H4eEZoon5fTcacrkqJwwpnGJUA=\", false, function () {\n  return [useSocket, useImmer, useImmer];\n});\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Messages\");\n$RefreshReg$(_c2, \"Online\");","map":{"version":3,"sources":["C:/Users/19254/Documents/GitHub/7 React Projects/chat_app/socket-client/src/App.js"],"names":["React","useState","useEffect","useSocket","useImmer","Messages","props","data","map","m","Online","id","setId","nameInput","setNameInput","room","setRoom","input","setInput","socket","connect","messages","setMessages","online","setOnline","on","nick","message","draft","push","people","newState","person","console","log","filter","handleSubmit","e","preventDefault","alert","emit","handleSend","display","flexDirection","target","value","trim","width","textAlign","margin","event"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './index.css';\nimport useSocket from 'use-socket.io-client';\nimport { useImmer } from 'use-immer';\n\n\nconst Messages = props => props.data.map(m => m[0] !== '' ? (<li><strong>{m[0]}</strong> : <div className=\"innermsg\">{m[1]}</div></li>) : (<li className=\"update\">{m[1]}</li>));\n\nconst Online = props => props.data.map(m => <li id={m[0]}>{m[1]}</li>);\n\nexport default () => {\n  const [id, setId] = useState('');\n  const [nameInput, setNameInput] = useState('');\n  const [room, setRoom] = useState('');\n  const [input, setInput] = useState('');\n\n  const [socket] = useSocket('<https://open-chat-naostsaecf.now.sh>');\n  socket.connect();\n\n  const [messages, setMessages] = useImmer([]);\n  const [online, setOnline] = useImmer([]);\n\n  useEffect(()=>{\n    socket.on('message que', (nick, message) => {\n      setMessages(draft => {\n        draft.push([nick, message])\n      })\n    });\n\n    socket.on('update', message => setMessages(draft => {\n      draft.push(['', message]);\n    }));\n\n    socket.on('people-list', people => {\n      let newState = [];\n      for(let person in people){\n        newState.push([people[person].id,people[person].nick]);\n      }\n      setOnline(draft=>{draft.push(...newState)});\n      console.log(online)\n    });\n\n    socket.on('add-person', (nick,id)=> {\n      setOnline(draft => {\n        draft.push([id,nick])\n      })\n    });\n\n    socket.on('remove-person', id=>{\n      setOnline(draft=>{draft.filter(m=>m[0] !== id)})\n    });\n\n    socket.on('chat message', (nick, message) => {\n      setMessages(draft => {draft.push([nick,message])})\n    });\n  },0);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if(!nameInput) {\n      return alert(\"Name can't be empty\");\n    }\n    setId(nameInput);\n    socket.emit('join', nameInput, room);\n  };\n\n  const handleSend = e => {\n    e.preventDefault();\n    if(input !== ''){\n      socket.emit('chat message', input, room);\n      setInput('');\n    }\n  };\n\n  return id ? (\n    <section style={{ display: \"flex\", flexDirection: \"row\"}}>\n      <ul id=\"messages\">\n        <Messages data={messages} />\n      </ul>\n      <ul id=\"online\">\n        { \"\" }\n        &#x1f310; : <Online data={online} />{\" \"}\n      </ul>\n      <div id=\"sendform\">\n        <form onSubmit={e => handleSend(e)} style={{display:'flex'}}>\n          <input id=\"m\" onChange={e => setInput(e.target.value.trim())} />\n          <button style={{width: \"75px\"}} type=\"submit\">\n            Send\n          </button>\n        </form>\n      </div>\n    </section>\n  ) : (\n    <div style={{ textAlign: \"center\", margin: \"30vh auto\", width: \"70%\"}}>\n      <form onSubmit={event => handleSubmit(event)}>\n        <input \n        id=\"name\" \n        onChange={e => setNameInput(e.target.value.trim())} \n        required\n        placeholder=\"What is your name ..\"\n        />\n        <br />\n        <input \n        id=\"room\"\n        onChange={e => setRoom(e.target.value.trim())}\n        placeholder=\"What is your room ..\"\n        />\n        <br />\n        <button type=\"submit\">Submit</button>\n      </form>\n    </div>\n  );\n};"]},"metadata":{},"sourceType":"module"}